# -----------------------------------------------------------------------------
# Single source of runtime configuration for Docker + Rust API + DB init
# Copy this file to .env and adjust values as needed.
# -----------------------------------------------------------------------------

# Core services
POSTGRES_USER=trading_user
POSTGRES_PASSWORD=trading_password
POSTGRES_DB=trading_db
DATABASE_URL=postgresql://trading_user:trading_password@postgres:5432/trading_db

# Connection pool
DB_MIN_POOL_SIZE=20
DB_MAX_POOL_SIZE=120
DB_MAX_LIFETIME_SECONDS=1800
DB_ACQUIRE_TIMEOUT_SECONDS=30

# Auth
JWT_SECRET_KEY=change-this-secret
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# API server
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=["http://localhost:1234","http://localhost:3000","http://localhost:8080"]

# Trading defaults
DEFAULT_SELLER_FEE_RATE=0.005

# Seed data / admin user (used by trading_init_db)
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@trading.local
ADMIN_PASSWORD=ChangeMe123!
INITIAL_CURRENCIES=["USD","EUR","GBP","JPY"]
INITIAL_PRODUCTS=["BTC","ETH","XRP","LTC"]

# pgAdmin
PGADMIN_DEFAULT_EMAIL=admin@example.com
PGADMIN_DEFAULT_PASSWORD=admin

# Matcher / read-cache tuning
MATCHER_MAX_CONCURRENT_MARKETS=2
ORDER_INTENT_COALESCE_MS=5
READ_CACHE_TICK_MS=50
READ_CACHE_MIN_TICK_MS=10
READ_CACHE_MAX_TICK_MS=100
READ_CACHE_TARGET_P95_MS=450
READ_CACHE_TARGET_MAX_MS=700
READ_CACHE_FORCE_REFRESH_MS=2000
READ_CACHE_MARKETS_PER_TICK=4
READ_CACHE_SKIP_IF_ORDER_INTENT_Q_ABOVE=0
HISTORY_CLEAN_INTERVAL_SECS=60
HISTORY_INACTIVE_MARKET_TRADE_TTL_MS=1800000
HISTORY_CLOSED_ORDER_MATCH_TTL_MS=86400000
